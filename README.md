# ğŸš€ NewAPI Worker å·¥å…·

é€™æ˜¯ä¸€å€‹åŸºæ–¼ Cloudflare Workers çš„å·¥å…·ï¼Œç”¨æ–¼å®‰å…¨åœ°æ“ä½œ NewAPIï¼Œç‰¹åˆ¥æ˜¯æŸ¥è©¢æ¸ é“è©³ç´°è³‡è¨Šã€‚æ‰€æœ‰æ•æ„Ÿæ†‘è­‰è³‡æ–™éƒ½åƒ…ä¿å­˜åœ¨ä½¿ç”¨è€…çš„ç€è¦½å™¨æœ¬åœ°å­˜å„²ä¸­ï¼Œç¢ºä¿è³‡æ–™å®‰å…¨æ€§ã€‚

<div align="center">

![Cloudflare](https://img.shields.io/badge/Cloudflare-F38020?style=for-the-badge&logo=cloudflare&logoColor=white)
![JavaScript](https://img.shields.io/badge/JavaScript-F7DF1E?style=for-the-badge&logo=javascript&logoColor=black)
![HTML5](https://img.shields.io/badge/HTML5-E34F26?style=for-the-badge&logo=html5&logoColor=white)
![CSS3](https://img.shields.io/badge/CSS3-1572B6?style=for-the-badge&logo=css3&logoColor=white)

</div>

## ğŸ“‘ ç›®éŒ„

- [ğŸš€ NewAPI Worker å·¥å…·](#-newapi-worker-å·¥å…·)
  - [ğŸ“‘ ç›®éŒ„](#-ç›®éŒ„)
  - [ğŸ“‹ éƒ¨ç½²æŒ‡å—](#-éƒ¨ç½²æŒ‡å—)
    - [ğŸ”§ éƒ¨ç½²åˆ° Cloudflare Workers](#-éƒ¨ç½²åˆ°-cloudflare-workers)
    - [âš¡ å¿«é€Ÿéƒ¨ç½²æ–¹å¼](#-å¿«é€Ÿéƒ¨ç½²æ–¹å¼)
  - [ğŸ“ ä½¿ç”¨æ–¹æ³•](#-ä½¿ç”¨æ–¹æ³•)
    - [ğŸŒ è¨ªå•å·¥å…·](#-è¨ªå•å·¥å…·)
    - [ğŸ” é…ç½® NewAPI æ†‘è­‰](#-é…ç½®-newapi-æ†‘è­‰)
    - [ğŸ” æŸ¥è©¢æ¸ é“ä¿¡æ¯](#-æŸ¥è©¢æ¸ é“ä¿¡æ¯)
  - [âœ¨ åŠŸèƒ½ç‰¹è‰²](#-åŠŸèƒ½ç‰¹è‰²)
    - [ğŸ›¡ï¸ å®‰å…¨æ€§](#ï¸-å®‰å…¨æ€§)
    - [ğŸ¨ ä½¿ç”¨é«”é©—](#-ä½¿ç”¨é«”é©—)
    - [ğŸ“Š è³‡æ–™è™•ç†](#-è³‡æ–™è™•ç†)
    - [ğŸ’¾ é›¢ç·šåŠŸèƒ½](#-é›¢ç·šåŠŸèƒ½)
  - [âš ï¸ æ³¨æ„äº‹é …](#ï¸-æ³¨æ„äº‹é …)

## ğŸ“‹ éƒ¨ç½²æŒ‡å—

### ğŸ”§ éƒ¨ç½²åˆ° Cloudflare Workers

<details>
<summary>é»æ“Šå±•é–‹è©³ç´°éƒ¨ç½²æ­¥é©Ÿ</summary>

1. **ğŸ“ è¨»å†Š Cloudflare å¸³è™Ÿ**
   - å¦‚æœå°šæœªæ“æœ‰ Cloudflare å¸³è™Ÿï¼Œè«‹å‰å¾€ [Cloudflare å®˜ç¶²](https://dash.cloudflare.com/sign-up) è¨»å†Šã€‚

2. **â¬‡ï¸ å®‰è£ Wrangler CLI å·¥å…·**
   - Wrangler æ˜¯ Cloudflare å®˜æ–¹æä¾›çš„å‘½ä»¤è¡Œå·¥å…·ï¼Œç”¨æ–¼éƒ¨ç½² Workersã€‚
   - ä½¿ç”¨ npm å®‰è£ï¼š
   ```bash
   npm install -g @cloudflare/wrangler
   ```

3. **ğŸ”‘ ç™»å…¥ Wrangler**
   - åœ¨çµ‚ç«¯æ©ŸåŸ·è¡Œï¼š
   ```bash
   wrangler login
   ```
   - æŒ‰ç…§å½ˆå‡ºçš„ç€è¦½å™¨æŒ‡ç¤ºé€²è¡Œæˆæ¬Šã€‚

4. **ğŸ“ åˆå§‹åŒ–é …ç›®**
   - å‰µå»ºä¸€å€‹æ–°è³‡æ–™å¤¾ä¸¦åˆå§‹åŒ–é …ç›®ï¼š
   ```bash
   mkdir newapi-worker && cd newapi-worker
   wrangler init
   ```
   - é¸æ“‡ã€Œå¾é ­é–‹å§‹ã€é¸é …ã€‚

5. **âš™ï¸ é…ç½® wrangler.toml**
   - ç·¨è¼¯ç”Ÿæˆçš„ `wrangler.toml` æ–‡ä»¶ï¼Œè¨­å®šæ‚¨çš„é …ç›®åç¨±ï¼š
   ```toml
   name = "newapi-worker"
   main = "worker.js"
   compatibility_date = "2023-06-28"

   [triggers]
   routes = [{ pattern = "ä½ çš„åŸŸå", custom_domain = true }]
   ```
   - å¦‚æœä¸ä½¿ç”¨è‡ªå®šç¾©åŸŸåï¼Œå¯ä»¥åˆªé™¤ `[triggers]` éƒ¨åˆ†ã€‚

6. **ğŸ“¤ éƒ¨ç½²ä»£ç¢¼**
   - å°‡æœ¬å°ˆæ¡ˆçš„ `worker.js` æª”æ¡ˆè¤‡è£½åˆ°æ‚¨çš„é …ç›®è³‡æ–™å¤¾ä¸­ã€‚
   - åŸ·è¡Œéƒ¨ç½²å‘½ä»¤ï¼š
   ```bash
   wrangler publish
   ```

7. **ğŸ”— ç²å– Worker ç¶²å€**
   - éƒ¨ç½²æˆåŠŸå¾Œï¼Œçµ‚ç«¯æ©Ÿæœƒé¡¯ç¤ºæ‚¨çš„ Worker è¨ªå•ç¶²å€ï¼Œé€šå¸¸æ ¼å¼ç‚ºï¼š
   ```
   https://newapi-worker.æ‚¨çš„ç”¨æˆ¶å.workers.dev
   ```
   - è¨˜éŒ„æ­¤ç¶²å€ä»¥ä¾¿å¾ŒçºŒä½¿ç”¨ã€‚

</details>

### âš¡ å¿«é€Ÿéƒ¨ç½²æ–¹å¼

> ğŸ’¡ **æç¤º**ï¼šæ­¤æ–¹æ³•é©åˆå¿«é€Ÿè©¦ç”¨ï¼Œç„¡éœ€å®‰è£ä»»ä½•å·¥å…·ã€‚

<ol>
  <li>ç™»å…¥ <a href="https://dash.cloudflare.com/">Cloudflare Dashboard</a></li>
  <li>é€²å…¥ "Workers & Pages" éƒ¨åˆ†</li>
  <li>é»æ“Š "Create Application"</li>
  <li>é¸æ“‡ "Create Worker"</li>
  <li>åœ¨ç·¨è¼¯ç•Œé¢ä¸­ï¼Œåˆªé™¤æ‰€æœ‰é»˜èªä»£ç¢¼</li>
  <li>è²¼å…¥æœ¬å°ˆæ¡ˆçš„ <code>worker.js</code> å…§å®¹</li>
  <li>é»æ“Š "Save and Deploy"</li>
  <li>ä½¿ç”¨åˆ†é…çš„ç¶²å€è¨ªå•æ‚¨çš„æ‡‰ç”¨</li>
</ol>

![éƒ¨ç½²æµç¨‹](https://www.cloudflare.com/static/9fbc15496b47ff30cdb86abac2ea5834/workers_deploy_dashboard.png)

## ğŸ“ ä½¿ç”¨æ–¹æ³•

### ğŸŒ è¨ªå•å·¥å…·

1. ä½¿ç”¨ç€è¦½å™¨è¨ªå•æ‚¨éƒ¨ç½²å¥½çš„ Worker ç¶²å€ã€‚

### ğŸ” é…ç½® NewAPI æ†‘è­‰

<table>
<tr>
<td>
  
**æº–å‚™ NewAPI æ†‘è­‰** ğŸ—ï¸
- æ‚¨éœ€è¦æœ‰æ•ˆçš„ NewAPI URL å’Œ Access Tokenã€‚
- å¦‚æœæ²’æœ‰é€™äº›è³‡è¨Šï¼Œè«‹è¯ç¹«æ‚¨çš„ NewAPI ç®¡ç†å“¡ã€‚
  
</td>
<td>
  
**åœ¨å·¥å…·ä¸­å¡«å…¥æ†‘è­‰** ğŸ“
- åœ¨ç•Œé¢çš„ "API è¨­å®š" å€å¡Šä¸­ï¼š
  - API URLï¼šè¼¸å…¥æ‚¨çš„ NewAPI å®Œæ•´ URL
  - Access Tokenï¼šè¼¸å…¥æ‚¨çš„ API è¨ªå•ä»¤ç‰Œ
- é»æ“Šã€Œå„²å­˜æ†‘è­‰ã€æŒ‰éˆ•ä¿å­˜åˆ°æœ¬åœ°å­˜å„²
  
</td>
</tr>
</table>

### ğŸ” æŸ¥è©¢æ¸ é“ä¿¡æ¯

```mermaid
graph TD
    A[ç²å–æ¸ é“åˆ—è¡¨] -->|é»æ“ŠæŒ‰éˆ•| B[é¡¯ç¤ºæ¸ é“åˆ—è¡¨]
    B --> C{éœ€è¦æœç´¢ç‰¹å®šæ¸ é“?}
    C -->|æ˜¯| D[ä½¿ç”¨æœç´¢æ¡†éæ¿¾]
    C -->|å¦| E[ç›´æ¥é¸æ“‡æ¸ é“]
    D --> E
    E --> F[é»æ“Šç²å–è©³æƒ…]
    F --> G[æŸ¥çœ‹æ¸ é“è©³ç´°è³‡è¨Š]
    G --> H{éœ€è¦è¤‡è£½è³‡è¨Š?}
    H -->|è¤‡è£½å–®é …| I[é»æ“Šè¡¨æ ¼ä¸­çš„å€¼]
    H -->|è¤‡è£½å…¨éƒ¨| J[é»æ“Šè¤‡è£½æ‰€æœ‰è©³æƒ…]
```

1. **ğŸ“‹ ç²å–æ¸ é“åˆ—è¡¨**
   - é»æ“Šã€Œç²å–æ¸ é“åˆ—è¡¨ã€æŒ‰éˆ•ï¼Œå·¥å…·æœƒå¾ API ç²å–æ‰€æœ‰å¯ç”¨æ¸ é“ã€‚
   - æ¸ é“åˆ—è¡¨æœƒé¡¯ç¤ºåœ¨ä¸‹æ‹‰é¸æ“‡æ¡†ä¸­ã€‚

2. **ğŸ” æœç´¢ç‰¹å®šæ¸ é“**
   - åœ¨æœç´¢æ¡†ä¸­è¼¸å…¥æ¸ é“ ID æˆ–åç¨±çš„ä¸€éƒ¨åˆ†ï¼Œå¯ä»¥ç«‹å³éæ¿¾æ¸ é“åˆ—è¡¨ã€‚
   - æ”¯æŒæ¨¡ç³Šæœç´¢ï¼Œåªéœ€è¼¸å…¥éƒ¨åˆ†é—œéµå­—å³å¯ã€‚

3. **ğŸ“Š æŸ¥çœ‹æ¸ é“è©³æƒ…**
   - å¾åˆ—è¡¨ä¸­é¸æ“‡ä¸€å€‹æ¸ é“ã€‚
   - é»æ“Šã€Œç²å–è©³æƒ…ã€æŒ‰éˆ•ã€‚
   - æ¸ é“çš„è©³ç´°è³‡è¨Šæœƒä»¥è¡¨æ ¼å½¢å¼é¡¯ç¤ºã€‚

4. **ğŸ“‹ è¤‡è£½è³‡è¨Š**
   - é»æ“Šè¡¨æ ¼ä¸­çš„ä»»ä½•å€¼å–®å…ƒæ ¼å¯ä»¥ç›´æ¥è¤‡è£½è©²å€¼åˆ°å‰ªè²¼æ¿ã€‚
   - è¤‡è£½æˆåŠŸæ™‚æœƒæœ‰è¦–è¦ºåé¥‹å’Œç‹€æ…‹æç¤ºã€‚
   - é»æ“Šã€Œè¤‡è£½æ‰€æœ‰è©³æƒ…ã€æŒ‰éˆ•å¯ä»¥ä¸€æ¬¡æ€§è¤‡è£½æ‰€æœ‰æ¸ é“è©³æƒ…ç‚º JSON æ ¼å¼ã€‚

## âœ¨ åŠŸèƒ½ç‰¹è‰²

### ğŸ›¡ï¸ å®‰å…¨æ€§

- **ğŸ”’ æœ¬åœ°è³‡æ–™å­˜å„²**ï¼šæ‰€æœ‰æ•æ„Ÿæ†‘è­‰åƒ…å­˜å„²åœ¨ç”¨æˆ¶çš„ç€è¦½å™¨ä¸­ï¼Œä¸åœ¨ä¼ºæœå™¨ä¿å­˜ä»»ä½•æ•æ„Ÿè³‡è¨Šã€‚
- **ğŸ”„ ä»£ç†è«‹æ±‚**ï¼šé€šé Cloudflare Worker ä»£ç† API è«‹æ±‚ï¼Œé¿å…è·¨åŸŸå•é¡Œä¸¦æå‡å®‰å…¨æ€§ã€‚

### ğŸ¨ ä½¿ç”¨é«”é©—

- **ğŸ“± éŸ¿æ‡‰å¼è¨­è¨ˆ**ï¼šé©æ‡‰ä¸åŒè¢å¹•å°ºå¯¸çš„è£ç½®ã€‚
- **ğŸ§­ ç›´è§€æ“ä½œ**ï¼šæ¸…æ™°çš„ç•Œé¢å’Œæ“ä½œæµç¨‹ã€‚
- **ğŸ” æ¨¡ç³Šæœç´¢**ï¼šå¿«é€Ÿæ‰¾åˆ°éœ€è¦çš„æ¸ é“ï¼Œæ”¯æŒ ID å’Œåç¨±æœç´¢ã€‚
- **ğŸ–±ï¸ ä¸€éµè¤‡è£½**ï¼šé»æ“Šè¡¨æ ¼ä¸­çš„ä»»ä½•å€¼å³å¯è¤‡è£½ï¼Œç„¡éœ€é¸æ“‡æ–‡æœ¬æˆ–ä½¿ç”¨é¡å¤–æŒ‰éˆ•ã€‚
- **âœ… è¦–è¦ºåé¥‹**ï¼šè¤‡è£½æ“ä½œæä¾›æ˜ç¢ºçš„è¦–è¦ºåé¥‹ã€‚

### ğŸ“Š è³‡æ–™è™•ç†

- **ğŸ§¿ æ ¼å¼åŒ–é¡¯ç¤º**ï¼šJSON æ•¸æ“šæœƒè¢«è‡ªå‹•æ ¼å¼åŒ–ï¼Œæé«˜å¯è®€æ€§ã€‚
- **ğŸ“š å¤§å‹åˆ—è¡¨æ”¯æŒ**ï¼šèƒ½å¤ è™•ç†å’Œæœç´¢ä¸Šåƒå€‹æ¸ é“ã€‚
- **âš¡ å³æ™‚éæ¿¾**ï¼šè¼¸å…¥é—œéµå­—æ™‚ç«‹å³éæ¿¾çµæœã€‚

### ğŸ’¾ é›¢ç·šåŠŸèƒ½

- **ğŸ’¡ æ†‘è­‰è¨˜æ†¶**ï¼šå¯é¸æ“‡å°‡æ†‘è­‰ä¿å­˜åœ¨æœ¬åœ°ï¼Œä¸‹æ¬¡è¨ªå•è‡ªå‹•å¡«å……ã€‚
- **ğŸ§¹ æ¸…é™¤æ†‘è­‰**ï¼šæä¾›ç°¡å–®çš„æ–¹å¼æ¸…é™¤ä¿å­˜çš„æ†‘è­‰ã€‚

---

## âš ï¸ æ³¨æ„äº‹é …

> âš ï¸ **å®‰å…¨è­¦å‘Š**ï¼šè«‹å¦¥å–„ä¿ç®¡æ‚¨çš„ API æ†‘è­‰ï¼Œä¸è¦åœ¨å…¬å…±è¨­å‚™ä¸Šå­˜å„²æ†‘è­‰ã€‚

<div style="background-color: #fff3cd; padding: 15px; border-radius: 4px; border-left: 4px solid #ffc107; margin-bottom: 15px;">
<strong>ğŸ“Œ åŠŸèƒ½é™åˆ¶</strong><br>
æœ¬å·¥å…·åƒ…æä¾›æŸ¥è©¢åŠŸèƒ½ï¼Œä¸æ”¯æŒä¿®æ”¹æˆ–åˆªé™¤æ¸ é“è³‡è¨Šã€‚
</div>

<div style="background-color: #d1ecf1; padding: 15px; border-radius: 4px; border-left: 4px solid #0dcaf0; margin-bottom: 15px;">
<strong>ğŸ’¡ æç¤º</strong><br>
å¦‚é‡åˆ°æ¬Šé™å•é¡Œï¼Œè«‹ç¢ºèªæ‚¨çš„ Access Token å…·æœ‰é©ç•¶çš„æ¬Šé™ã€‚
</div>

---

<div align="center">
Made with â¤ï¸ for better API management
</div> 